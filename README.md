## Древовидное меню

Для хранения древовидной структуры в БД используется алгоритм Modified Preorder Tree Traversal, при котором для каждой записи хранятся left- и right-values.  
При добавлении записей через админку записям назначаются/переназначаются left- и right-values с помощью переопределения метода save_model() в admin.py.  
При удалении записей left- и right-values имеющихся в меню записей также переназначаются с помощью переопределения метода delete_model().  

Добавлены проверки, запрещающие создать более одного корня для меню, назначить родителем пункта из меню_1 пункт из меню_2, назначить корню родителя (корень должен создаваться с "пустым" родителем) и некоторые другие проверки.


На главной странице для каждого меню отображается ссылка на отрисовку всего меню "Draw menu Menu_name", а под ссылкой отображается top_menu - корневая нода меню и первый уровень потомков.  
При клике на одного из потомков меню осуществляется переход на отображение пунктов конкретного меню (отдельная страница): отображается текущий пункт, все вышестоящие пункты и потомки первого уровня. Сверху ссылка "Back to main page".  

При клике на "Draw menu Menu_name" осуществляется отрисовка всего меню на отдельной странице (также с ссылкой "Back to main page").
Отрисовка всего меню осуществляется в 1 sql-запрос (для проверки использовался django-debug-toolbar). Для возможности отрисовки меню через тег {% draw_menu menu_name %} данная функциональность вынесена в кастомный inclusion_tag.

При отображении конкретного пункта меню с вышестоящими нодами и потомками первого уровня (это отображается на другой странице, не на той же, где отображается всё меню целиком) используется на один запрос больше, поскольку до извлечения самих пунктов предварительно осуществляется извлечение текущего пункта меню по его id (с проверкой на то, что он существует).